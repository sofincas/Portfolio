<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{{ page.title }} Â· {{ site.title }}</title>

<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="{{ '/assets/icons/favicon.svg' | relative_url }}" />
<link rel="icon" type="image/png" sizes="32x32" href="{{ '/assets/icons/favicon-32x32.png' | relative_url }}" />
<link rel="icon" type="image/png" sizes="16x16" href="{{ '/assets/icons/favicon-16x16.png' | relative_url }}" />
<link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/icons/apple-touch-icon.png' | relative_url }}" />

<!-- Import styles from web-foundations -->
<link rel="stylesheet" href="https://ruvebal.github.io/web-atelier-udit/assets/css/site.css" />

<!-- Local overrides (optional) -->
<link rel="stylesheet" href="{{ '/assets/css/site.css' | relative_url }}" />

{% include head-jsonld.html %} {% include head-hreflang.html %}

<script>
	// Apply theme immediately to prevent flash
	(function () {
		try {
			const theme = localStorage.getItem('theme') || 'light';
			if (theme === 'dark') {
				document.documentElement.classList.add('dark');
			}
		} catch (e) {
			// localStorage might not be available
		}
	})();
</script>

<script>
	// Copy code to clipboard functionality
	document.addEventListener('DOMContentLoaded', function () {
		const codeBlocks = document.querySelectorAll('.prose pre');
		codeBlocks.forEach(function (pre) {
			if (pre.querySelector('.copy-code-btn')) return;

			const button = document.createElement('button');
			button.className = 'copy-code-btn';
			button.setAttribute('aria-label', 'Copy code to clipboard');
			button.innerHTML =
				'<svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>';

			button.addEventListener('click', function () {
				const codeText = pre.querySelector('code').textContent;
				navigator.clipboard
					.writeText(codeText)
					.then(function () {
						const originalHTML = button.innerHTML;
						button.innerHTML =
							'<svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>';
						button.classList.add('copied');
						setTimeout(function () {
							button.innerHTML = originalHTML;
							button.classList.remove('copied');
						}, 2000);
					})
					.catch(function (err) {
						console.error('Failed to copy code:', err);
					});
			});

			pre.appendChild(button);
		});
	});
</script>
